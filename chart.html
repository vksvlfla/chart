<!DOCTYPE html>
<html>
<head>
<title>NOCKANDA EXAMPLE</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
</head>
<body>
<div style="width:480px;">
<canvas id="line1"></canvas>
</div>

<script>
var ctx = document.getElementById('line1').getContext('2d');
var chart = new Chart(ctx, {
	type: 'line',
	data: {
		labels: ['N-6', 'N-5', 'N-4', 'N-3', 'N-2', 'N-1', 'N'],
		datasets: [
				{
					label: 'BPM',
					backgroundColor: 'transparent',
					borderColor: "black",
					data: [0, 0, 0, 0, 0, 0, 0],  // 초기값을 0으로 설정
					lineTension: 0,  // 선을 직선으로 설정
					fill: false      // 선 아래를 채우지 않음
				}
		]
	},
	options: {
		scales: {
			yAxes: [{
				ticks: {
					min: 30,  // y축 최소값을 30으로 설정 (70에서 40 아래)
					max: 110, // y축 최대값을 110으로 설정 (70에서 40 위)
					stepSize: 10,  // y축 눈금 간격
					callback: function(value, index, values) {
						return value;  // 값 그대로 표시
					}
				}
			}]
		},
		elements: {
			line: {
				borderWidth: 2  // 선의 두께 설정
			},
			point: {
				radius: 3  // 데이터 점의 크기 설정
			}
		}
	}
});

function nockanda_forever(){
	var recieve = parseFloat(window.AppInventor.getWebViewString());

	chart.data.datasets[0].data.shift();  // 이전 데이터 제거
	chart.data.datasets[0].data.push(recieve);  // 새 데이터 추가
	chart.update();  // 그래프 업데이트
}

// 1초마다 그래프 업데이트
setInterval(nockanda_forever, 1000);
</script>
</body>
</html>
